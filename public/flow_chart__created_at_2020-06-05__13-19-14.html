<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sequence diagram</title>
</head>
<body>
<textarea id="input" hidden>
graph TD
	InitialNode[Start]-->Step_1(The Librarian selects the Lend Book function.)
	Step_1-->Step_2(The system shows the lend_book window, gets the current date and assigns it to the book_loan date.)
	Step_2-->Step_3(The Librarian enters a book copy id.)
	Step_3-->Step_4(The system checks the book copy id. If it is invalid then it goes to step 4a1.)
	Step_4-->DecisionNodeStep_4{it is invalid}
	DecisionNodeStep_4-->|Condition is true|Step_4a1(The system shows an error message, then going to step 3.)
	DecisionNodeStep_4-->Step_5(The Librarian enters a borrower id.)
	Step_5-->Step_6(The system validates the borrower id. If it is invalid then goes to step 6a1.)
	Step_6-->DecisionNodeStep_6{it is invalid}
	DecisionNodeStep_6-->|Condition is true|Step_6a1(The system shows an error message, then going to step 5.)
	DecisionNodeStep_6-->Step_7(The Librarian clicks the save_book_loan button.)
	Step_7-->Step_8(The system validates the conditions to lend book. If it is invalid then the system goes to step 8a1.)
	Step_8-->DecisionNodeStep_8{it is invalid}
	DecisionNodeStep_8-->|Condition is true|Step_8a1(The system shows an error message, then going to step 12.)
	DecisionNodeStep_8-->Step_9(The system saves the book loan record.)
	Step_9-->Step_10(The system shows a complete message.)
	Step_10-->Step_11(The system prints the borrowing bill.)
	Step_11-->Step_12(The system ends the use case.)
	Step_12-->FinalNode[Finish]
	Step_8a1-->Step_12(The system ends the use case.)
	Step_6a1-->Step_5(The Librarian enters a borrower id.)
	Step_E11[The Librarian selects the search function after step 4a1.]-->Step_E12(The system executes the extending use case Search book.)
	Step_4a1-->Step_3(The Librarian enters a book copy id.)
</textarea>
<div style="display:none">
    Your code (for debugging):
    <pre id="preview"></pre>
</div>
<div id="output" style="margin:20px"></div>
  <script src="https://unpkg.com/mermaid@8.4.8/dist/mermaid.js"></script>
<script>
var input = document.getElementById("input");
var preview = document.getElementById("preview");
var output = document.getElementById("output");
var renderBtn = document.getElementById("render");
mermaid.initialize({
      theme: 'forest',
      logLevel: 3,
      securityLevel: 'loose',
      sequence: {
       	actorMargin: 400,
      	messageMargin: 50,
      	mirrorActors:false
      },
	  flowchart:{
    	useMaxWidth:false,
    	htmlLabels:false,
    	curve:'cardinal',
	  },
});
preview.innerHTML = input.value;
mermaid.render('theGraph', input.value, function(svgCode) {
    output.innerHTML = svgCode;
});



</script>

<style>
</style>

</body>
</html>