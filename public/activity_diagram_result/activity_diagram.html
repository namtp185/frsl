<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>UML activity diagram</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8" />
    <meta name="description" content="This demo page illustrates the UML activity diagram in Diagram widget of Syncfusion Essential Studio for jQuery (or Essential JS 1)." />
    <link href="./bootstrap.min.css" rel="stylesheet" />
    <link href="./ej.web.all.min.css" rel="stylesheet" />
    <link href="./default.css" rel="stylesheet" />
    <link href="./default-responsive.css" rel="stylesheet" />
    <link href="./symbolpalette.css" rel="stylesheet" />
    <!--script src="./jquery-1.11.3.min.js" type="text/javascript"></script-->
    <script src="./jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="./ej.web.all.min.js"></script>
    <script src="./jsrender.min.js"></script>
    <script src="./properties.js" type="text/javascript"></script>
    <script src="./diagramcommon.js"></script>
</head>
<body>
    <div class="content-container-fluid">
        <div class="row">
            <div class="cols-sample-area">
                <div class="control_section">
                    <div class="symPalette_section">
                        <div id="symbolpalette">
                        </div>
                    </div>
                    <div class="middle_section"></div>
                    <div class="diagram_section">
                        <div id="diagram"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

    	var actionPorts = [
    		{ name: "in", offset: { x: 0.5, y: 0 }, shape: "circle" },
        	{ name: "out", offset: { x: 0.5, y: 1 }, shape: "circle" },
		];
    	
    	var decisionPorts = [
    		{ name: "in1", offset: { x: 0, y: 0.5 }, shape: "circle" },
        	{ name: "in2", offset: { x: 1, y: 0.5 }, shape: "circle" },
		];
    
        var palettes = [{
            name: "UML Activity Shapes",
            expanded: true,
            items: [
                {
                    name: "AcceptingEvent", width: 80, height: 50, offsetX: 70 / 2, offsetY: 45 / 2,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.AcceptingEvent,
                    title: "Accepting Event"
                },
                {
                    name: "Action", width: 80, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.Action
                },
                {
                    name: "SendSignal", width: 80, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.SendSignal
                },
                {
                    name: "MergeNode", width: 80, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.MergeNode
                },
                {
                    name: "Decision", width: 80, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.Decision
                },
                {

                    name: "FinalNode", width: 70, height: 70, offsetX: 35, offsetY: 35,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.FinalNode
                },
                {
                    name: "JoinNode", width: 90, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.JoinNode,
                },
                {
                    name: "ForkNode", height: 90, width: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.ForkNode,
                },
                {
                    name: "InitialNode", width: 70, height: 70, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.InitialNode
                },
                {
                    name: "TimeEvent", width: 50, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.TimeEvent
                },

                {
                    name: "ReceiveSignal", width: 80, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.ReceiveSignal
                },
                {
                    name: "StructuredNode", width: 80, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    labels: [{ text: "Structured Node" }],
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.StructuredNode
                },
                {
                    name: "Note", width: 80, height: 50, offsetX: 20, offsetY: 20,
                    type: "umlactivity",
                    shape: ej.datavisualization.Diagram.UMLActivityShapes.Note
                }
            ]
        }];

        var nodes = [{name: "InitialNode", width: 50, height: 50, offsetX: 350, offsetY: 40,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.InitialNode,},
{name: "Step_1", width: 160, height: 60, offsetX: 350, offsetY: 140,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The Librarian selects  the Lend Book function"}],ports: actionPorts,},
{name: "Step_2", width: 160, height: 90, offsetX: 350, offsetY: 250,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system shows the  lend_book window, gets  the current date and  assigns it to the  book_loan date"}],ports: actionPorts,},
{name: "DecisionNodeStep_2", width: 160, height: 50, offsetX: 350, offsetY: 390,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Decision,labels: [{ "text": "need to search book"}],},
{name: "Step_E11", width: 160, height: 60, offsetX: 250, offsetY: 490,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The Librarian selects  the search function"}],ports: actionPorts,},
{name: "Step_3", width: 160, height: 60, offsetX: 460, offsetY: 490,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The Librarian enters a  book copy id"}],ports: actionPorts,},
{name: "Step_4", width: 160, height: 60, offsetX: 460, offsetY: 600,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system checks the  book copy id"}],ports: actionPorts,},
{name: "DecisionNodeStep_4", width: 160, height: 50, offsetX: 460, offsetY: 710,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Decision,labels: [{ "text": "book copy id is valid"}],},
{name: "Step_5", width: 160, height: 60, offsetX: 360, offsetY: 810,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The Librarian enters a  borrower id"}],ports: actionPorts,},
{name: "Step_4a1", width: 160, height: 60, offsetX: 570, offsetY: 810,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system shows an  error message"}],ports: actionPorts,},
{name: "Step_6", width: 160, height: 60, offsetX: 360, offsetY: 920,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system validates  the borrower id"}],ports: actionPorts,},
{name: "DecisionNodeStep_6", width: 160, height: 50, offsetX: 360, offsetY: 1030,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Decision,labels: [{ "text": "borrower id is invalid"}],},
{name: "Step_6a1", width: 160, height: 60, offsetX: 260, offsetY: 1130,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system shows an  error message"}],ports: actionPorts,},
{name: "Step_7", width: 160, height: 70, offsetX: 470, offsetY: 1130,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The Librarian clicks  the save_book_loan  button"}],ports: actionPorts,},
{name: "Step_8", width: 160, height: 70, offsetX: 470, offsetY: 1250,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system validates  the conditions to lend  book"}],ports: actionPorts,},
{name: "DecisionNodeStep_8", width: 160, height: 50, offsetX: 470, offsetY: 1370,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Decision,labels: [{ "text": "conditions are invalid"}],},
{name: "Step_8a1", width: 160, height: 60, offsetX: 370, offsetY: 1470,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system shows an  error message"}],ports: actionPorts,},
{name: "Step_9", width: 160, height: 60, offsetX: 580, offsetY: 1470,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system saves the  book loan record"}],ports: actionPorts,},
{name: "ForkNodeStep_9", width: 50, height: 50, offsetX: 580, offsetY: 1580,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.ForkNode,ports: actionPorts,},
{name: "Step_10", width: 160, height: 60, offsetX: 480, offsetY: 1680,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system shows a  complete message"}],ports: actionPorts,},
{name: "Step_11", width: 160, height: 60, offsetX: 690, offsetY: 1680,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system prints the  borrowing bill"}],ports: actionPorts,},
{name: "Step_12", width: 160, height: 60, offsetX: 900, offsetY: 1680,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system prints the  borrowing bill"}],ports: actionPorts,},
{name: "Step_E12", width: 160, height: 70, offsetX: 250, offsetY: 600,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.Action,labels: [{ "text": "The system executes the  extending use case  Search book"}],ports: actionPorts,},
{name: "JoinNode_between_Step_11Step_12Step_10", width: 50, height: 50, offsetX: 480, offsetY: 1790,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.JoinNode,ports: actionPorts,},
{name: "FinalNode", width: 50, height: 50, offsetX: 370, offsetY: 1580,type: "umlactivity",shape: ej.datavisualization.Diagram.UMLActivityShapes.FinalNode,},
];

        var connectors = [{name: "BasicFlowEdge_InitialNode_to_Step_1", sourceNode: "InitialNode", targetNode: "Step_1", segments: [{ "type": "orthogonal" }], targetPort: "in",},
{name: "BasicFlowEdge_Step_1_to_Step_2", sourceNode: "Step_1", targetNode: "Step_2", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_Step_2_to_DecisionNodeStep_2", sourceNode: "Step_2", targetNode: "DecisionNodeStep_2", segments: [{ "type": "orthogonal" }], sourcePort: "out",},
{name: "AlternateFlowEdge_DecisionNodeStep_2_to_Step_E11", sourceNode: "DecisionNodeStep_2", targetNode: "Step_E11", segments: [{ "type": "orthogonal" }], labels: [{ "text": "True"}],targetPort: "in",},
{name: "BasicFlowEdge_DecisionNodeStep_2_to_Step_3", sourceNode: "DecisionNodeStep_2", targetNode: "Step_3", segments: [{ "type": "orthogonal" }], labels: [{ "text": "false"}],targetPort: "in",},
{name: "BasicFlowEdge_Step_3_to_Step_4", sourceNode: "Step_3", targetNode: "Step_4", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_Step_4_to_DecisionNodeStep_4", sourceNode: "Step_4", targetNode: "DecisionNodeStep_4", segments: [{ "type": "orthogonal" }], sourcePort: "out",},
{name: "BasicFlowEdge_DecisionNodeStep_4_to_Step_5", sourceNode: "DecisionNodeStep_4", targetNode: "Step_5", segments: [{ "type": "orthogonal" }], labels: [{ "text": "True"}],targetPort: "in",},
{name: "AlternateFlowEdge_DecisionNodeStep_4_to_Step_4a1", sourceNode: "DecisionNodeStep_4", targetNode: "Step_4a1", segments: [{ "type": "orthogonal" }], labels: [{ "text": "False"}],targetPort: "in",},
{name: "BasicFlowEdge_Step_5_to_Step_6", sourceNode: "Step_5", targetNode: "Step_6", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_Step_6_to_DecisionNodeStep_6", sourceNode: "Step_6", targetNode: "DecisionNodeStep_6", segments: [{ "type": "orthogonal" }], sourcePort: "out",},
{name: "AlternateFlowEdge_DecisionNodeStep_6_to_Step_6a1", sourceNode: "DecisionNodeStep_6", targetNode: "Step_6a1", segments: [{ "type": "orthogonal" }], labels: [{ "text": "True"}],targetPort: "in",},
{name: "BasicFlowEdge_DecisionNodeStep_6_to_Step_7", sourceNode: "DecisionNodeStep_6", targetNode: "Step_7", segments: [{ "type": "orthogonal" }], labels: [{ "text": "false"}],targetPort: "in",},
{name: "BasicFlowEdge_Step_7_to_Step_8", sourceNode: "Step_7", targetNode: "Step_8", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_Step_8_to_DecisionNodeStep_8", sourceNode: "Step_8", targetNode: "DecisionNodeStep_8", segments: [{ "type": "orthogonal" }], sourcePort: "out",},
{name: "AlternateFlowEdge_DecisionNodeStep_8_to_Step_8a1", sourceNode: "DecisionNodeStep_8", targetNode: "Step_8a1", segments: [{ "type": "orthogonal" }], labels: [{ "text": "True"}],targetPort: "in",},
{name: "BasicFlowEdge_DecisionNodeStep_8_to_Step_9", sourceNode: "DecisionNodeStep_8", targetNode: "Step_9", segments: [{ "type": "orthogonal" }], labels: [{ "text": "false"}],targetPort: "in",},
{name: "BasicFlowEdge_Step_9_to_ForkNodeStep_9", sourceNode: "Step_9", targetNode: "ForkNodeStep_9", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_ForkNodeStep_9_to_Step_10", sourceNode: "ForkNodeStep_9", targetNode: "Step_10", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_ForkNodeStep_9_to_Step_11", sourceNode: "ForkNodeStep_9", targetNode: "Step_11", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_ForkNodeStep_9_to_Step_12", sourceNode: "ForkNodeStep_9", targetNode: "Step_12", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "AlternateFlowEdge_Step_6a1_to_Step_5", sourceNode: "Step_6a1", targetNode: "Step_5", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "AlternateFlowEdge_Step_E11_to_Step_E12", sourceNode: "Step_E11", targetNode: "Step_E12", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "AlternateFlowEdge_Step_E12_to_Step_3", sourceNode: "Step_E12", targetNode: "Step_3", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "AlternateFlowEdge_Step_4a1_to_Step_3", sourceNode: "Step_4a1", targetNode: "Step_3", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_Step_10_to_FinalNode", sourceNode: "Step_10", targetNode: "JoinNode_between_Step_11Step_12Step_10", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_Step_11_to_FinalNode", sourceNode: "Step_11", targetNode: "JoinNode_between_Step_11Step_12Step_10", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "BasicFlowEdge_Step_12_to_FinalNode", sourceNode: "Step_12", targetNode: "JoinNode_between_Step_11Step_12Step_10", segments: [{ "type": "orthogonal" }], sourcePort: "out",targetPort: "in",},
{name: "AlternateFlowEdge_Step_8a1_to_FinalNode", sourceNode: "Step_8a1", targetNode: "FinalNode", segments: [{ "type": "orthogonal" }], sourcePort: "out",},
{name: "BasicFlowEdge_null_to_FinalNode", sourceNode: "JoinNode_between_Step_11Step_12Step_10", targetNode: "FinalNode", segments: [{ "type": "orthogonal" }], sourcePort: "out",},
];

        $(function () {

            $("#symbolpalette").ejSymbolPalette({
                diagramId: "diagram",
                palettes: palettes,
                height: "90vh", width: "100%",
                paletteItemWidth: 50, paletteItemHeight: 50,
                previewWidth: 100, previewHeight: 100,
                showPaletteItemText: false,
            });

            $("#diagram").ejDiagram({
                height: "90vh", width: "100%", nodes: nodes,
                connectors: connectors,
                pageSettings: { scrollLimit: "diagram" },
                snapSettings: { snapConstraints: ej.datavisualization.Diagram.SnapConstraints.None },
                defaultSettings: {
                    node: {
                        borderColor: "black", labels: [{ "fontColor": "black" }]
                    }
                },
            });
            setToolTip(true);
        });

        function setToolTip(isLoad) {
            var paletteItems;
            if (isLoad)
                paletteItems = $(".e-paletteItem");
            for (m = 0; m < paletteItems.length; m++) {
                var title = "";
                var wWord = ((paletteItems[m].id).split("_")[0]);
                if (wWord) {
                    if (wWord.split(/(?=[A-Z])/)[0])
                        title += " " + wWord.split(/(?=[A-Z])/)[0];
                    if (wWord.split(/(?=[A-Z])/)[1])
                        title += " " + wWord.split(/(?=[A-Z])/)[1];
                    if (wWord.split(/(?=[A-Z])/)[2])
                        title += " " + wWord.split(/(?=[A-Z])/)[2];
                    if (wWord.split(/(?=[A-Z])/)[3])
                        title += " " + wWord.split(/(?=[A-Z])/)[3];
                    if (wWord.split(/(?=[A-Z])/)[4])
                        title += " " + wWord.split(/(?=[A-Z])/)[4];
                }
                paletteItems[m].setAttribute("title", title);
            }
        }

    </script>
    <style>
        .control_section {
            height: 90vh;
            width: 100%;
            background-color: transparent;
        }

        .diagram_section {
            width: calc(100% - 235px);
            height: 100%;
            float: left;
        }

        .middle_section {
            float: left;
            width: 5px;
            height: 100%;
        }

        .symPalette_section {
            width: 230px;
            height: 100%;
            float: left;
        }
    </style>


</body>
</html>